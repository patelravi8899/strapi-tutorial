"use strict";(self.webpackChunkstrapitutorial=self.webpackChunkstrapitutorial||[]).push([[8418],{95972:(N,x,t)=>{t.r(x),t.d(x,{default:()=>Le});var e=t(67294),T=t(23724),d=t(97132),o=t(68547),y=t(14087),b=t(185),j=t(67838),h=t(49066),f=t(81912),a=t(89031),P=(s,i,n)=>new Promise((I,R)=>{var w=A=>{try{W(n.next(A))}catch(F){R(F)}},Z=A=>{try{W(n.throw(A))}catch(F){R(F)}},W=A=>A.done?I(A.value):Promise.resolve(A.value).then(w,Z);W((n=n.apply(s,i)).next())});const C=()=>P(void 0,null,function*(){const{data:s}=yield a.be.get((0,a.Gc)("email-templates"));return s}),m=s=>a.be.put((0,a.Gc)("email-templates"),s);var p=t(45697),r=t.n(p),g=t(38939),L=t(8060),$=t(79031),U=t(37909),v=t(15234),O=t(63237),M=t(72735),B=t(12028),l=t(52624),c=t(4585),u=t(30815),E=t(85018),D=Object.defineProperty,S=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Y=(s,i,n)=>i in s?D(s,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[i]=n,V=(s,i)=>{for(var n in i||(i={}))K.call(i,n)&&Y(s,n,i[n]);if(S)for(var n of S(i))X.call(i,n)&&Y(s,n,i[n]);return s};const G=({canUpdate:s,onEditClick:i})=>{const{formatMessage:n}=(0,d.useIntl)();return e.createElement(g.i,{colCount:3,rowCount:3},e.createElement(L.h,null,e.createElement($.Tr,null,e.createElement(U.Th,{width:"1%"},e.createElement(O.T,null,n({id:(0,a.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(U.Th,null,e.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},n({id:(0,a.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(U.Th,{width:"1%"},e.createElement(O.T,null,n({id:(0,a.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(v.p,null,e.createElement($.Tr,V({},(0,o.onRowClick)({fn:()=>i("reset_password")})),e.createElement(U.Td,null,e.createElement(l.J,null,e.createElement(u.Z,{"aria-label":n({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(U.Td,null,e.createElement(M.Z,null,n({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(U.Td,V({},o.stopPropagation),e.createElement(B.h,{onClick:()=>i("reset_password"),label:n({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(c.Z,null)}))),e.createElement($.Tr,V({},(0,o.onRowClick)({fn:()=>i("email_confirmation")})),e.createElement(U.Td,null,e.createElement(l.J,null,e.createElement(E.Z,{"aria-label":n({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(U.Td,null,e.createElement(M.Z,null,n({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(U.Td,V({},o.stopPropagation),e.createElement(B.h,{onClick:()=>i("email_confirmation"),label:n({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(c.Z,null)})))))};G.propTypes={canUpdate:r().bool.isRequired,onEditClick:r().func.isRequired};const k=G;var me=t(80831),ce=t(42866),pe=t(24969),ue=t(59946),Ee=t(36856),ve=t(11276),Q=t(74571),ne=t(29728),ae=t(2407),fe=t(64256),H=t(53209);const ye=H.Ry().shape({options:H.Ry().shape({from:H.Ry().shape({name:H.Z_().required(o.translatedErrors.required),email:H.Z_().email(o.translatedErrors.email).required(o.translatedErrors.required)}).required(),response_email:H.Z_().email(o.translatedErrors.email),object:H.Z_().required(o.translatedErrors.required),message:H.Z_().required(o.translatedErrors.required)}).required(o.translatedErrors.required)}),re=({template:s,onToggle:i,onSubmit:n})=>{const{formatMessage:I}=(0,d.useIntl)();return e.createElement(ce.P,{onClose:i,labelledBy:`${I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${I({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(pe.x,null,e.createElement(ae.O,{label:`${I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${I({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(ae.$,null,I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(ae.$,null,I({id:(0,a.OB)(s.display),defaultMessage:s.display})))),e.createElement(me.Formik,{onSubmit:n,initialValues:s,validateOnChange:!1,validationSchema:ye,enableReinitialize:!0},({errors:R,values:w,handleChange:Z,isSubmitting:W})=>{var A,F,J,q,_,ee,te;return e.createElement(o.Form,null,e.createElement(ue.f,null,e.createElement(ve.r,{gap:5},e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:Z,value:w.options.from.name,error:(F=(A=R==null?void 0:R.options)==null?void 0:A.from)==null?void 0:F.name,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:Z,value:w.options.from.email,error:(q=(J=R==null?void 0:R.options)==null?void 0:J.from)==null?void 0:q.email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:Z,value:w.options.response_email,error:(_=R==null?void 0:R.options)==null?void 0:_.response_email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:Z,value:w.options.object,error:(ee=R==null?void 0:R.options)==null?void 0:ee.object,type:"text"})),e.createElement(Q.P,{col:12,s:12},e.createElement(fe.g,{label:I({id:(0,a.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:Z,value:w.options.message,error:((te=R==null?void 0:R.options)==null?void 0:te.message)&&I({id:R.options.message,defaultMessage:R.options.message})})))),e.createElement(Ee.m,{startActions:e.createElement(ne.z,{onClick:i,variant:"tertiary"},"Cancel"),endActions:e.createElement(ne.z,{loading:W,type:"submit"},"Finish")}))}))};re.propTypes={template:r().shape({display:r().string,icon:r().string,options:r().shape({from:r().shape({name:r().string,email:r().string}),message:r().string,object:r().string,response_email:r().string})}).isRequired,onSubmit:r().func.isRequired,onToggle:r().func.isRequired};const ge=re;var he=Object.defineProperty,Oe=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,se=(s,i,n)=>i in s?he(s,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[i]=n,Me=(s,i)=>{for(var n in i||(i={}))Te.call(i,n)&&se(s,n,i[n]);if(oe)for(var n of oe(i))be.call(i,n)&&se(s,n,i[n]);return s},Be=(s,i)=>Oe(s,Pe(i)),Re=(s,i,n)=>new Promise((I,R)=>{var w=A=>{try{W(n.next(A))}catch(F){R(F)}},Z=A=>{try{W(n.throw(A))}catch(F){R(F)}},W=A=>A.done?I(A.value):Promise.resolve(A.value).then(w,Z);W((n=n.apply(s,i)).next())});const Ae=()=>e.createElement(o.CheckPagePermissions,{permissions:f.Z.readEmailTemplates},e.createElement(Ce,null)),Ce=()=>{const{formatMessage:s}=(0,d.useIntl)(),{trackUsage:i}=(0,o.useTracking)(),{notifyStatus:n}=(0,y.G)(),I=(0,o.useNotification)(),{lockApp:R,unlockApp:w}=(0,o.useOverlayBlocker)(),Z=(0,e.useRef)(i),W=(0,T.useQueryClient)();(0,o.useFocusWhenNavigate)();const[A,F]=(0,e.useState)(!1),[J,q]=(0,e.useState)(null),_=(0,e.useMemo)(()=>({update:f.Z.updateEmailTemplates}),[]),{isLoading:ee,allowedActions:{canUpdate:te}}=(0,o.useRBAC)(_),{status:De,data:ie}=(0,T.useQuery)("email-templates",()=>C(),{onSuccess(){n(s({id:(0,a.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),xe=ee||De!=="success",le=()=>{F(z=>!z)},je=z=>{q(z),le()},de=(0,T.useMutation)(z=>m({"email-templates":z}),{onSuccess(){return Re(this,null,function*(){yield W.invalidateQueries("email-templates"),I({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),Z.current("didEditEmailTemplates"),w(),le()})},onError(){I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),w()},refetchActive:!0}),{isLoading:Ie}=de,Ue=z=>{R(),Z.current("willEditEmailTemplates");const Se=Be(Me({},ie),{[J]:z});de.mutate(Se)};return xe?e.createElement(b.o,{"aria-busy":"true"},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(h.D,null,e.createElement(o.LoadingIndicatorPage,null))):e.createElement(b.o,{"aria-busy":Ie},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(h.D,null,e.createElement(k,{onEditClick:je,canUpdate:te}),A&&e.createElement(ge,{template:ie[J],onToggle:le,onSubmit:Ue})))},Le=Ae},46979:(N,x,t)=>{t.d(x,{Z:()=>j});var e=t(9669),T=t.n(e),d=t(68547),o=t.n(d),y=(h,f,a)=>new Promise((P,C)=>{var m=g=>{try{r(a.next(g))}catch(L){C(L)}},p=g=>{try{r(a.throw(g))}catch(L){C(L)}},r=g=>g.done?P(g.value):Promise.resolve(g.value).then(m,p);r((a=a.apply(h,f)).next())});const b=T().create({baseURL:""});b.interceptors.request.use(h=>y(void 0,null,function*(){return h.headers={Authorization:`Bearer ${d.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},h}),h=>{Promise.reject(h)}),b.interceptors.response.use(h=>h,h=>{var f;throw((f=h.response)==null?void 0:f.status)===401&&(d.auth.clearAppStorage(),window.location.reload()),h});const j=b},89031:(N,x,t)=>{t.d(x,{be:()=>e.Z,YX:()=>o,Gc:()=>j,OB:()=>h.Z});var e=t(46979),T=t(96486);const o=f=>Object.keys(f).reduce((a,P)=>{const C=f[P].controllers,m=Object.keys(C).reduce((p,r)=>((0,T.isEmpty)(C[r])||(p[r]=C[r]),p),{});return(0,T.isEmpty)(m)||(a[P]={controllers:m}),a},{});var y=t(31498);const j=f=>`/${y.Z}/${f}`;var h=t(84757)},2407:(N,x,t)=>{t.d(x,{$:()=>L,O:()=>U});var e=t(67294),T=t(45697),d=t(71893),o=t(16405),y=t(72735),b=t(35961),j=t(46273),h=t(63237),f=Object.defineProperty,a=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,m=(v,O,M)=>O in v?f(v,O,{enumerable:!0,configurable:!0,writable:!0,value:M}):v[O]=M,p=(v,O)=>{for(var M in O||(O={}))P.call(O,M)&&m(v,M,O[M]);if(a)for(var M of a(O))C.call(O,M)&&m(v,M,O[M]);return v},r=(v,O)=>{var M={};for(var B in v)P.call(v,B)&&O.indexOf(B)<0&&(M[B]=v[B]);if(v!=null&&a)for(var B of a(v))O.indexOf(B)<0&&C.call(v,B)&&(M[B]=v[B]);return M};const g=(0,d.default)(j.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:v})=>v.colors.neutral500};
    }
  }
  :last-of-type ${b.x} {
    display: none;
  }
  :last-of-type ${y.Z} {
    color: ${({theme:v})=>v.colors.neutral800};
    font-weight: ${({theme:v})=>v.fontWeights.bold};
  }
`,L=({children:v})=>e.createElement(g,{inline:!0,as:"li"},e.createElement(y.Z,{variant:"pi",textColor:"neutral600"},v),e.createElement(b.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3},e.createElement(o.default,null)));L.displayName="Crumb",L.propTypes={children:T.node.isRequired};const $=T.shape({type:T.oneOf([L])}),U=v=>{var O=v,{children:M,label:B}=O,l=r(O,["children","label"]);return e.createElement(j.k,p({},l),e.createElement(h.T,null,B),e.createElement("ol",{"aria-hidden":!0},M))};U.displayName="Breadcrumbs",U.propTypes={children:T.oneOfType([T.arrayOf($),$]).isRequired,label:T.string.isRequired}},49066:(N,x,t)=>{t.d(x,{D:()=>o});var e=t(67294),T=t(45697),d=t(35961);const o=({children:y})=>e.createElement(d.x,{paddingLeft:10,paddingRight:10},y);o.propTypes={children:T.node.isRequired}},67838:(N,x,t)=>{t.d(x,{A:()=>B,T:()=>O});var e=t(67294),T=t(71893),d=t(45697),o=t(72735),y=t(35961),b=t(46273);const j=l=>{const c=(0,e.useRef)(null),[u,E]=(0,e.useState)(!0),D=([S])=>{E(S.isIntersecting)};return(0,e.useEffect)(()=>{const S=c.current,K=new IntersectionObserver(D,l);return S&&K.observe(c.current),()=>{S&&K.disconnect()}},[c,l]),[c,u]};var h=t(98402);const f=(l,c)=>{const u=(0,h.useCallbackRef)(c);(0,e.useLayoutEffect)(()=>{const E=new ResizeObserver(u);return Array.isArray(l)?l.forEach(D=>{D.current&&E.observe(D.current)}):l.current&&E.observe(l.current),()=>{E.disconnect()}},[l,u])};var a=Object.defineProperty,P=Object.defineProperties,C=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,g=(l,c,u)=>c in l?a(l,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[c]=u,L=(l,c)=>{for(var u in c||(c={}))p.call(c,u)&&g(l,u,c[u]);if(m)for(var u of m(c))r.call(c,u)&&g(l,u,c[u]);return l},$=(l,c)=>P(l,C(c)),U=(l,c)=>{var u={};for(var E in l)p.call(l,E)&&c.indexOf(E)<0&&(u[E]=l[E]);if(l!=null&&m)for(var E of m(l))c.indexOf(E)<0&&r.call(l,E)&&(u[E]=l[E]);return u};const v=()=>{const l=(0,e.useRef)(null),[c,u]=(0,e.useState)(null),[E,D]=j({root:null,rootMargin:"0px",threshold:0});return f(E,()=>{E.current&&u(E.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{l.current&&u(l.current.getBoundingClientRect())},[l]),{containerRef:E,isVisible:D,baseHeaderLayoutRef:l,headerSize:c}},O=l=>{const{containerRef:c,isVisible:u,baseHeaderLayoutRef:E,headerSize:D}=v();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:D==null?void 0:D.height},ref:c},u&&e.createElement(B,L({ref:E},l))),!u&&e.createElement(B,$(L({},l),{sticky:!0,width:D==null?void 0:D.width})))};O.displayName="HeaderLayout";const M=(0,T.default)(y.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${l=>l.width}px;
  z-index: 4;
  box-shadow: ${({theme:l})=>l.shadows.tableShadow};
`,B=e.forwardRef((l,c)=>{var u=l,{navigationAction:E,primaryAction:D,secondaryAction:S,subtitle:K,title:X,sticky:Y,width:V}=u,G=U(u,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const k=typeof K=="string";return Y?e.createElement(M,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:V,"data-strapi-header-sticky":!0},e.createElement(b.k,{justifyContent:"space-between"},e.createElement(b.k,null,E&&e.createElement(y.x,{paddingRight:3},E),e.createElement(y.x,null,e.createElement(o.Z,L({variant:"beta",as:"h1"},G),X),k?e.createElement(o.Z,{variant:"pi",textColor:"neutral600"},K):K),S?e.createElement(y.x,{paddingLeft:4},S):null),e.createElement(b.k,null,D?e.createElement(y.x,{paddingLeft:2},D):void 0))):e.createElement(y.x,{ref:c,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:E?6:8,background:"neutral100","data-strapi-header":!0},E?e.createElement(y.x,{paddingBottom:2},E):null,e.createElement(b.k,{justifyContent:"space-between"},e.createElement(b.k,null,e.createElement(o.Z,L({as:"h1",variant:"alpha"},G),X),S?e.createElement(y.x,{paddingLeft:4},S):null),D),k?e.createElement(o.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},K):K)});B.displayName="BaseHeaderLayout",B.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},B.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,sticky:d.bool,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired,width:d.number},O.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},O.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired}},185:(N,x,t)=>{t.d(x,{o:()=>C});var e=t(67294),T=t(45697),d=t(71893),o=Object.defineProperty,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,h=(m,p,r)=>p in m?o(m,p,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[p]=r,f=(m,p)=>{for(var r in p||(p={}))b.call(p,r)&&h(m,r,p[r]);if(y)for(var r of y(p))j.call(p,r)&&h(m,r,p[r]);return m},a=(m,p)=>{var r={};for(var g in m)b.call(m,g)&&p.indexOf(g)<0&&(r[g]=m[g]);if(m!=null&&y)for(var g of y(m))p.indexOf(g)<0&&j.call(m,g)&&(r[g]=m[g]);return r};const P=d.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,C=m=>{var p=m,{labelledBy:r}=p,g=a(p,["labelledBy"]);const L=r||"main-content-title";return e.createElement(P,f({"aria-labelledby":L,id:"main-content",tabIndex:-1},g))};C.defaultProps={labelledBy:void 0},C.propTypes={labelledBy:T.string}},30815:(N,x,t)=>{t.d(x,{Z:()=>h});var e=t(67294),T=Object.defineProperty,d=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(f,a,P)=>a in f?T(f,a,{enumerable:!0,configurable:!0,writable:!0,value:P}):f[a]=P,j=(f,a)=>{for(var P in a||(a={}))o.call(a,P)&&b(f,P,a[P]);if(d)for(var P of d(a))y.call(a,P)&&b(f,P,a[P]);return f};function h(f){return e.createElement("svg",j({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.681 2.804A9.64 9.64 0 0011.818 2C6.398 2 2 6.48 2 12c0 5.521 4.397 10 9.818 10 2.03 0 4.011-.641 5.67-1.835a9.987 9.987 0 003.589-4.831 1.117 1.117 0 00-.664-1.418 1.086 1.086 0 00-1.393.676 7.769 7.769 0 01-2.792 3.758 7.546 7.546 0 01-4.41 1.428V4.222h.002a7.492 7.492 0 013.003.625 7.61 7.61 0 012.5 1.762l.464.551-2.986 3.042a.186.186 0 00.129.316H22V3.317a.188.188 0 00-.112-.172.179.179 0 00-.199.04l-2.355 2.4-.394-.468-.02-.02a9.791 9.791 0 00-3.239-2.293zm-3.863 1.418V2v2.222zm0 0v15.556c-4.216 0-7.636-3.484-7.636-7.778s3.42-7.777 7.636-7.778z",fill:"#212134"}))}}}]);
